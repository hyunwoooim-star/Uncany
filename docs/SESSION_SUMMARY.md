# Uncany ì„¸ì…˜ ìš”ì•½

## ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-15 (ì˜¤ëŠ˜)

---

## í”„ë¡œì íŠ¸ í˜„ì¬ ìƒíƒœ: âœ… v0.3.2 (Staging í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘)

### ì™„ë£Œëœ í•µì‹¬ ê¸°ëŠ¥
- ì¸ì¦ ì‹œìŠ¤í…œ (ë¡œê·¸ì¸/íšŒì›ê°€ì…/ë¡œê·¸ì•„ì›ƒ/ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •)
- ì˜ˆì•½ ì‹œìŠ¤í…œ (êµì‹œ ê¸°ë°˜, Advisory Lockìœ¼ë¡œ ë™ì‹œì„± ì œì–´)
- êµì‹¤ ê´€ë¦¬ (CRUD)
- í”„ë¡œí•„ ê´€ë¦¬ (í•™ë…„/ë°˜ ì •ë³´)
- ê´€ë¦¬ì ê¸°ëŠ¥ (ì‚¬ìš©ì ìŠ¹ì¸/ë°˜ë ¤/ì‚­ì œ)
- ë²•ì  ë¬¸ì„œ (ì´ìš©ì•½ê´€, ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨, ì‚¬ì—…ì ì •ë³´)
- ì•„ì´ë”” ì°¾ê¸°/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
- í•™êµ ê²€ìƒ‰ (NEIS API ì—°ë™)
- ìŠ¹ì¸ ëŒ€ê¸° ì˜¨ë³´ë”© í™”ë©´ (í† ìŠ¤ ìŠ¤íƒ€ì¼)
- **í† ìŠ¤ ìŠ¤íƒ€ì¼ UI ì»´í¬ë„ŒíŠ¸** (bouncing button, skeleton, animations ë“±)

---

## ì˜¤ëŠ˜ ì™„ë£Œëœ ì‘ì—… (2026-01-15)

### ë²„ê·¸ ìˆ˜ì •
- [x] **í”„ë¡œí•„ í™”ë©´ "ìœ„í—˜ êµ¬ì—­" ê³„ì • ì‚­ì œ** â†’ "ê³„ì • ê´€ë¦¬"ë¡œ ë³€ê²½
  - ë¹¨ê°„ìƒ‰ ëˆˆì— ë„ëŠ” ë²„íŠ¼ â†’ ì‘ì€ í…ìŠ¤íŠ¸ ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½
  - ì‚¬ìš©ìê°€ ì‹¤ìˆ˜ë¡œ íƒˆí‡´í•˜ì§€ ì•Šë„ë¡ ê°œì„ 

- [x] **êµì‹œ í‘œì‹œ ë²„ê·¸ ìˆ˜ì •** (reservation_screen.dart)
  - ê¸°ì¡´: 3êµì‹œ, 6êµì‹œ ì„ íƒ â†’ "3~6êµì‹œ" (ì˜ëª»ë¨)
  - ìˆ˜ì •: 3êµì‹œ, 6êµì‹œ ì„ íƒ â†’ "3, 6êµì‹œ" (ì˜¬ë°”ë¦„)
  - ì—°ì† êµì‹œë§Œ ë²”ìœ„ë¡œ í‘œì‹œ (ì˜ˆ: 1,2,3 â†’ "1~3êµì‹œ")

- [x] **ë‚ ì§œ ë³€ê²½ ì‹œ ì´ì „ ë°ì´í„° ì´ˆê¸°í™”**
  - ë‚ ì§œ ë³€ê²½ ì‹œ ì´ì „ ì˜ˆì•½ ë°ì´í„° ì¦‰ì‹œ ì´ˆê¸°í™”
  - ë””ë²„ê·¸ ë¡œê·¸ ì¶”ê°€ (ë‚ ì§œë³„ ì˜ˆì•½ ì¡°íšŒ í™•ì¸ìš©)

### ì»¤ë°‹ ë‚´ì—­
```
19db533 fix: í”„ë¡œí•„ í™”ë©´ UX ê°œì„  ë° êµì‹œ í‘œì‹œ ë²„ê·¸ ìˆ˜ì •
```

### ìˆ˜ì •ëœ íŒŒì¼
```
lib/src/features/auth/presentation/profile_screen.dart      # ìœ„í—˜êµ¬ì—­ â†’ ê³„ì •ê´€ë¦¬
lib/src/features/reservation/presentation/reservation_screen.dart  # êµì‹œ í‘œì‹œ ë²„ê·¸
```

---

## ì¡°ì‚¬ ì¤‘ì¸ ì´ìŠˆ

### ë‚ ì§œë³„ ì˜ˆì•½ ë¶„ë¦¬ ë¬¸ì œ
- **ì¦ìƒ**: 1ì›” 14ì¼ ì˜ˆì•½ì´ 15ì¼, 16ì¼ì—ë„ ë³´ì¸ë‹¤ëŠ” ë³´ê³ 
- **ì½”ë“œ ë¶„ì„ ê²°ê³¼**: ë¡œì§ìƒ ë¬¸ì œ ì—†ìŒ (ë‚ ì§œë³„ í•„í„°ë§ ì •ìƒ)
- **ê°€ëŠ¥í•œ ì›ì¸**:
  1. ì‹¤ì œ ë°ì´í„°ê°€ ì—¬ëŸ¬ ë‚ ì§œì— ë“±ë¡ë¨
  2. ë¸Œë¼ìš°ì € ìºì‹œ ë¬¸ì œ
- **ì¶”ê°€ëœ ë””ë²„ê·¸ ë¡œê·¸**: ì½˜ì†”ì—ì„œ ë‚ ì§œ/êµì‹œ ìˆ˜ í™•ì¸ ê°€ëŠ¥
  ```
  ğŸ“… ì˜ˆì•½ ì¡°íšŒ: 2026-1-15
  ğŸ“‹ ì¡°íšŒëœ êµì‹œ ìˆ˜: 0
  ```
- **í™•ì¸ ë°©ë²•**: Supabase Dashboardì—ì„œ `reservations` í…Œì´ë¸” ë°ì´í„° í™•ì¸

---

## ë‹¤ìŒì— í•  ì‘ì—…

### ì¦‰ì‹œ í…ŒìŠ¤íŠ¸ í•„ìš”
1. **ì•„ì´ë”” ì°¾ê¸°** - RPC í•¨ìˆ˜ ì ìš© í™•ì¸
2. **ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •** - ì´ë©”ì¼ ë°œì†¡ ë° ë§í¬ ì‘ë™ í™•ì¸
3. **íšŒì›ê°€ì… ì „ì²´ í”Œë¡œìš°** - ê°€ì… â†’ ìŠ¹ì¸ ëŒ€ê¸° â†’ ìŠ¹ì¸ í›„ í™ˆ ì´ë™

### ìš°ì„ ìˆœìœ„ ë†’ìŒ
- Staging ì „ì²´ ê¸°ëŠ¥ E2E í…ŒìŠ¤íŠ¸
- ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ì‚¬ìš©ì ìŠ¹ì¸ í…ŒìŠ¤íŠ¸

### ìš°ì„ ìˆœìœ„ ì¤‘ê°„
- SHA-1 í‚¤ Supabase ë“±ë¡ (Android Google ë¡œê·¸ì¸)
- ì•Œë¦¼ ì‹œìŠ¤í…œ (FCM)
- Production í™˜ê²½ ì„¤ì •

### ìš°ì„ ìˆœìœ„ ë‚®ìŒ
- ì•±ìŠ¤í† ì–´ ë“±ë¡ ì¤€ë¹„

---

## Supabase ì„¤ì • í˜„í™©

### Dashboardì—ì„œ ì™„ë£Œí•œ ì‘ì—…
| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| Edge Functions | âœ… | neis-api, delete-account |
| Secrets | âœ… | NEIS_API_KEY |
| Storage Bucket | âœ… | verification-documents |
| Redirect URLs | âœ… | localhost + staging |
| RPC í•¨ìˆ˜ | âœ… | get_username_by_email |
| Auth íŠ¸ë¦¬ê±° | âœ… | handle_new_user |

### ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ (ì°¸ê³ ìš©)
```
supabase/migrations/
â”œâ”€â”€ 001_initial_schema.sql
â”œâ”€â”€ 002_schools_and_multitenancy.sql
â”œâ”€â”€ 003_fix_rls_and_add_periods.sql
â”œâ”€â”€ 004_production_ready_security.sql
â”œâ”€â”€ 005_fix_critical_vulnerabilities.sql
â””â”€â”€ 006_auth_helpers.sql  â† NEW (RPC í•¨ìˆ˜)
```

---

## GitHub Secrets ì„¤ì • ì™„ë£Œ

- [x] SUPABASE_URL_STAGING
- [x] SUPABASE_ANON_KEY_STAGING
- [x] FIREBASE_SERVICE_ACCOUNT
- [x] NEIS_API_KEY

---

## ë°°í¬ í˜„í™©

| í™˜ê²½ | URL | ìƒíƒœ |
|------|-----|------|
| Staging | https://uncany-staging.web.app | âœ… ë°°í¬ë¨ |
| Production | - | ë¯¸ì„¤ì • |

---

## ê°œë°œ í™˜ê²½ ì°¸ê³ 

### ì£¼ìš” íŒŒì¼ ìœ„ì¹˜
```
lib/src/core/router/router.dart       # ë¼ìš°íŠ¸ ì •ì˜
lib/src/features/auth/               # ì¸ì¦ ê´€ë ¨
lib/src/features/reservation/        # ì˜ˆì•½ ê´€ë ¨
lib/src/features/school/             # í•™êµ ê²€ìƒ‰ (NEIS API)
supabase/migrations/                 # DB ë§ˆì´ê·¸ë ˆì´ì…˜
supabase/functions/                  # Edge Functions
```

### ì˜¤ëŠ˜ ìˆ˜ì •ëœ ì£¼ìš” íŒŒì¼
```
lib/src/features/auth/presentation/find_username_screen.dart  # RPC í˜¸ì¶œ
lib/src/features/auth/data/repositories/auth_repository.dart  # ë™ì  Redirect URL
lib/src/features/auth/presentation/pending_approval_screen.dart  # ìƒíƒœ í”¼ë“œë°±
lib/src/features/school/presentation/widgets/school_search_field.dart  # onTapDown
```

---

## ì•Œë ¤ì§„ ì´ìŠˆ

1. **audit_log_screen.dart**: ëª¨ì˜ ë°ì´í„° ì‚¬ìš© ì¤‘
2. **Deploy Web Preview**: GitHub ê¶Œí•œ ë¬¸ì œ (ì•± ë™ì‘ì— ì˜í–¥ ì—†ìŒ)
